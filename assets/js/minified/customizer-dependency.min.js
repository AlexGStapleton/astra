!function(c){"use strict";function e(){n.handleDependency()}var u=wp.customize,n={controls:{},init:function(){var i=this;i.handleDependency(),i.hideEmptySections(),u.state("astra-customizer-tab").bind(e),u.bind("change",function(e,n){i.hasDependentControls(e.id)&&(i.handleDependency(),i.hideEmptySections())})},hasDependentControls:function(a){var s=!1;return c.each(astra.config,function(e,n){if(_.isUndefined(n.conditions)){var i=n[0];if(a==i)return void(s=!0)}else{var t=n.conditions;c.each(t,function(e,n){var i=n[0];a!=i||(s=!0)})}}),s},handleDependency:function(){var t=this,e=u.get();t.checked_controls={},_.each(e,function(e,n){var i=u.control(n);t.checkControlVisibility(i,n)})},checkControlVisibility:function(e,n){var i=u.get();if(!_.isUndefined(e)&&void 0!==astra.config[n]){var t=!1,a=!0,s=astra.config[n],o=_.isUndefined(s.conditions)?s:s.conditions,c=_.isUndefined(s.operator)?"AND":s.operator;void 0!==o&&(t=this.checkDependency(o,i,c),a=this.checkContext(n),this.checked_controls[n]=t&&a,t&&a?e.container.removeClass("ast-hide"):e.container.addClass("ast-hide"))}},checkContext:function(e){var n=AstraBuilderCustomizerData.contexts[e];if(void 0===n)return!0;for(var i=u.state("astra-customizer-tab").get(),t=0;t<n.length;t++)return"ast_selected_tab"===n[t].setting&&n[t].value===i;return!0},checkDependency:function(e,r,d){var f=this,l=!0,h=!1,n=e[0];if(_.isString(n)){var i,t=e[1],a=e[2];if(!_.isUndefined(astra.config[n])){e=_.isUndefined(astra.config[n].conditions)?astra.config[n]:astra.config[n].conditions;var s=_.isUndefined(astra.config[n].operator)?"AND":astra.config[n].operator;if(!_.isUndefined(e))if(f.checkDependency(e,r,s)){var o=u.control(n);void 0!==o&&o.container.removeClass("ast-hide")}else if(l=!(h=!0),"AND"==d)return}_.isUndefined(r[n])||h||!l||(i=r[n],l=f.compareValues(i,t,a))}else _.isArray(n)&&(c.each(e,function(e,n){var i=n[0],t=n[1],a=n[2],s=_.isUndefined(r[i])?"":r[i];if(void 0!==astra.config[i]){var o=_.isUndefined(astra.config[i].conditions)?astra.config[i]:astra.config[i].conditions,c=_.isUndefined(astra.config[i].operator)?"AND":astra.config[i].operator;if(!_.isUndefined(o))if(f.checkDependency(o,r,c))l=!0,u.control(i).container.removeClass("ast-hide");else if(l=!1,"AND"==d)return}else l=!0;if(l)if("AND"==d){if(!f.compareValues(s,t,a))return l=!1}else l=!!f.compareValues(s,t,a)&&(h=!0)}),h&&"OR"==d&&(l=!0));return l},hideEmptySections:function(){c("ul.accordion-section.control-section-ast_section").each(function(){var e=c(this).attr("id"),n=!1,i=c(this).find(" > .customize-control");0<i.length&&(i.each(function(){c(this).hasClass("ast-hide")||"none"==c(this).css("display")||(n=!0)}),n?c('.control-section[aria-owns="'+e+'"]').removeClass("ast-hide"):c('.control-section[aria-owns="'+e+'"]').addClass("ast-hide"))})},compareValues:function(e,n,i){var t=!1;switch(n){case"===":t=e===i;break;case">":t=i<e;break;case"<":t=e<i;break;case"<=":t=e<=i;break;case">=":t=i<=e;break;case"!=":t=e!=i;break;case"empty":var a=_.clone(e);t=_.isObject(a)||_.isArray(a)?(_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),!!_.isEmpty(a)):!(!_.isNull(a)&&""!=a);break;case"not_empty":a=_.clone(e);(_.isObject(a)||_.isArray(a))&&_.each(a,function(e,n){_.isEmpty(e)&&delete a[n]}),t=!_.isEmpty(a);break;case"contains":_.isArray(e)&&-1!==c.inArray(i,e)&&(t=!0);break;default:t=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return t}};c(function(){window.addEventListener("load",function(){n.init()})})}(jQuery);