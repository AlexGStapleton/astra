jQuery,wp.customize.controlConstructor["ast-link"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,a=jQuery(".customize-link-control-data").data("value");this.container.on("change keyup",".ast-link-input",function(e){e.preventDefault(),value=jQuery(this).val(),a.url=value,jQuery(".customize-link-control-data").attr("data-value",JSON.stringify(a)).trigger("change"),t.setting.set(a)}),this.container.on("change click",".ast-link-open-in-new-tab",function(){value=jQuery(this).is(":checked"),a.new_tab=value,jQuery(".customize-link-control-data").attr("data-value",JSON.stringify(a)).trigger("change"),t.setting.set(a)}),this.container.on("change keyup",".ast-link-relationship",function(e){e.preventDefault(),value=jQuery(this).val(),a.link_rel=value,jQuery(".customize-link-control-data").attr("data-value",JSON.stringify(a)).trigger("change"),t.setting.set(a)})}}),jQuery,jQuery(window).on("load",function(){jQuery("html").addClass("responsive-background-color-ready")}),wp.customize.controlConstructor["ast-responsive-color"]=wp.customize.Control.extend({ready:function(){"use strict";this.initAstBgControl()},initAstBgControl:function(){var i=this;i.setting._value,i.container.find(".ast-responsive-color").wpColorPicker({change:function(e,t){if(jQuery("html").hasClass("responsive-background-color-ready")){var a=i.setting.get(),n=jQuery(this).data("id"),o={desktop:a.desktop,tablet:a.tablet,mobile:a.mobile};"desktop"===n&&(o.desktop=t.color.toString()),"tablet"===n&&(o.tablet=t.color.toString()),"mobile"===n&&(o.mobile=t.color.toString()),i.setting.set(o)}},clear:function(e){var t=jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0],a=jQuery(this).closest(".wp-picker-input-wrap").find(".wp-color-picker").data("id"),n=i.setting.get(),o={desktop:n.desktop,tablet:n.tablet,mobile:n.mobile};t&&("desktop"===a&&(o.desktop=""),"tablet"===a&&(o.tablet=""),"mobile"===a&&(o.mobile=""),i.setting.set(o))}}),this.container.find(".ast-responsive-btns button").on("click",function(e){var t=jQuery(this).attr("data-device");t="desktop"==t?"tablet":"tablet"==t?"mobile":"desktop",jQuery('.wp-full-overlay-footer .devices button[data-device="'+t+'"]').trigger("click")}),jQuery(".customize-control-ast-responsive-color .customize-control-content .ast-responsive-color.desktop").parents(".wp-picker-container").addClass("active")}}),jQuery(".wp-full-overlay-footer .devices button").on("click",function(){var e=jQuery(this).attr("data-device");jQuery(".customize-control-ast-responsive-color .customize-control-content .wp-picker-container").removeClass("active"),jQuery(".customize-control-ast-responsive-color .customize-control-content .ast-responsive-color."+e).parents(".wp-picker-container").addClass("active")}),function(u){jQuery(document).ready(function(){var i=0,r=jQuery(".wp-full-overlay-sidebar-content"),s=navigator.userAgent.toLowerCase();if(-1<s.indexOf("firefox"))c=16;else var c=6;jQuery("#customize-controls .wp-full-overlay-sidebar-content .control-section").on("scroll",function(e){var t=jQuery(this);if(t.hasClass("open")){var a=t.find(".customize-section-title"),n=t.scrollTop();if(i<n)a.removeClass("maybe-sticky").removeClass("is-in-view").removeClass("is-sticky"),t.css("padding-top","");else{var o=t.outerWidth();a.addClass("maybe-sticky").addClass("is-in-view").addClass("is-sticky").width(o-c).css("top",r.css("top")),-1<s.indexOf("firefox")||t.css("padding-top",a.height()),0===n&&(a.removeClass("maybe-sticky").removeClass("is-in-view").removeClass("is-sticky"),t.css("padding-top",""))}i=n}})}),wp.customize.controlConstructor["ast-settings-group"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;e.setting._value;e.registerToggleEvents(),this.container.on("ast_settings_changed",e.onOptionChange)},registerToggleEvents:function(){var c=this;u(".wp-full-overlay-sidebar-content, .wp-picker-container").click(function(e){u(e.target).closest(".ast-field-settings-modal").length||u(".ast-adv-toggle-icon.open").trigger("click")}),c.container.on("click",".ast-toggle-desc-wrap .ast-adv-toggle-icon",function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this),a=t.closest(".customize-control-ast-settings-group"),n=a.find(".ast-field-settings-modal").data("loaded"),o=a.parents(".control-section");if(t.hasClass("open"))a.find(".ast-field-settings-modal").hide();else{var i=o.find(".ast-adv-toggle-icon.open");if(0<i.length&&i.trigger("click"),n)a.find(".ast-field-settings-modal").show();else{var r=c.params.ast_fields,s=u(astra.customizer.group_modal_tmpl);a.find(".ast-field-settings-wrap").append(s),a.find(".ast-fields-wrap").attr("data-control",c.params.name),c.ast_render_field(a,r,c),a.find(".ast-field-settings-modal").show(),device=jQuery("#customize-footer-actions .active").attr("data-device"),"mobile"==device?(jQuery(".ast-responsive-btns .mobile, .ast-responsive-slider-btns .mobile").addClass("active"),jQuery(".ast-responsive-btns .preview-mobile, .ast-responsive-slider-btns .preview-mobile").addClass("active")):"tablet"==device?(jQuery(".ast-responsive-btns .tablet, .ast-responsive-slider-btns .tablet").addClass("active"),jQuery(".ast-responsive-btns .preview-tablet, .ast-responsive-slider-btns .preview-tablet").addClass("active")):(jQuery(".ast-responsive-btns .desktop, .ast-responsive-slider-btns .desktop").addClass("active"),jQuery(".ast-responsive-btns .preview-desktop, .ast-responsive-slider-btns .preview-desktop").addClass("active"))}}t.toggleClass("open")}),c.container.on("click",".ast-toggle-desc-wrap > .customizer-text",function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).find(".ast-adv-toggle-icon").trigger("click")})},ast_render_field:function(e,t,n){var r=this,o=e.find(".ast-fields-wrap"),i="",s=[],c=r.isJsonString(n.params.value)?JSON.parse(n.params.value):{};if(void 0!==t.tabs){var a=(a=n.params.name.replace("[","-")).replace("]","");i+='<div id="'+a+'-tabs" class="ast-group-tabs">',i+='<ul class="ast-group-list">';var l=0;_.each(t.tabs,function(e,t){var a="";0==l&&(a="active"),i+='<li class="'+a+'"><a href="#tab-'+t+'"><span>'+t+"</span></a></li>",l++}),i+="</ul>",i+='<div class="ast-tab-content" >',_.each(t.tabs,function(e,t){i+='<div id="tab-'+t+'" class="tab">';var a=r.generateFieldHtml(e,c);i+=a.html,_.each(a.controls,function(e,t){s.push({key:e.key,value:e.value,name:e.name})}),i+="</div>"}),i+="</div></div>",o.html(i),u("#"+a+"-tabs").tabs()}else{var d=r.generateFieldHtml(t,c);i+=d.html,_.each(d.controls,function(e,t){s.push({key:e.key,value:e.value,name:e.name})}),o.html(i)}_.each(s,function(e,t){switch(e.key){case"ast-responsive-color":r.initResponsiveColor(o,n,e.name);break;case"ast-color":r.initColor(o,n,e.name);break;case"ast-font":var a=astra.customizer.settings.google_fonts;r.container.find(".ast-font-family").html(a),r.container.find(".ast-font-family").each(function(){var e=u(this).data("value");u(this).val(e);var t=u(this).data("name");u("select[data-name='"+t+"'] option[value='inherit']").text(u(this).data("inherit"));var a=jQuery(".ast-font-weight[data-connected-control='"+t+"']"),n=AstTypography._getWeightObject(AstTypography._cleanGoogleFonts(e));r.generateDropdownHtml(n,a),a.val(a.data("value"))}),r.container.find(".ast-font-family").selectWoo(),r.container.find(".ast-font-family").on("select2:select",function(){var e=u(this).val(),t=AstTypography._getWeightObject(AstTypography._cleanGoogleFonts(e)),a=u(this).data("name"),n=jQuery(".ast-font-weight[data-connected-control='"+a+"']");r.generateDropdownHtml(t,n);var o=u(this).parents(".customize-control").attr("id");o=o.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,jQuery(this),e,o]);var i=n.parents(".customize-control").attr("id");i=i.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,n,n.val(),i])}),r.container.find(".ast-font-weight").on("change",function(){var e=u(this).val();name=u(this).parents(".customize-control").attr("id"),name=name.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,jQuery(this),e,name])});break;case"ast-responsive":r.initResponsiveTrigger(o,n),r.container.on("change keyup paste","input.ast-responsive-input, select.ast-responsive-select",function(){name=u(this).parents(".customize-control").attr("id"),name=name.replace("customize-control-",""),r.updateResonsiveValue(jQuery(this),name)});break;case"ast-select":r.container.on("change",".ast-select-input",function(){var e=jQuery(this).val();name=u(this).parents(".customize-control").attr("id"),name=name.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,jQuery(this),e,name])});break;case"ast-slider":r.container.on("input change","input[type=range]",function(){var e=jQuery(this).attr("value"),t=jQuery(this).closest(".wrapper").find(".astra_range_value .value");t.val(e),name=u(this).parents(".customize-control").attr("id"),name=name.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,t,e,name])}),r.container.on("click",".ast-slider-reset",function(){var e=jQuery(this).closest(".wrapper"),t=e.find("input[type=range]"),a=e.find(".astra_range_value .value"),n=t.data("reset_value");t.val(n),a.val(n),name=u(this).parents(".customize-control").attr("id"),name=name.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,a,n,name])}),r.container.find(".customize-control-ast-slider").on("input change","input[type=number]",function(){var e=jQuery(this).val();jQuery(this).closest(".wrapper").find("input[type=range]").val(e),name=u(this).parents(".customize-control").attr("id"),name=name.replace("customize-control-",""),r.container.trigger("ast_settings_changed",[r,jQuery(this),e,name])});break;case"ast-responsive-background":r.initAstResonsiveBgControl(n,e,e.name);break;case"ast-background":r.initAstBgControl(n,e,e.name);break;case"ast-border":r.initAstBorderControl(n,e,e.name)}}),e.find(".ast-field-settings-modal").data("loaded",!0)},initAstBorderControl:function(e,t,a){var n=this;n.setting._value,t.name;this.container.on("change keyup paste","input.ast-border-input",function(){n.saveBorderValue("border",jQuery(this).val(),jQuery(this),a)}),jQuery(".ast-border-connected").on("click",function(){jQuery(this).parent().parent(".ast-border-wrapper").find("input").removeClass("connected").attr("data-element-connect",""),jQuery(this).parent(".ast-border-input-item-link").removeClass("disconnected")}),jQuery(".ast-border-disconnected").on("click",function(){var e=jQuery(this).data("element-connect");jQuery(this).parent().parent(".ast-border-wrapper").find("input").addClass("connected").attr("data-element-connect",e),jQuery(this).parent(".ast-border-input-item-link").addClass("disconnected")}),jQuery(".ast-border-input-item").on("input",".connected",function(){var e=jQuery(this).attr("data-element-connect"),a=jQuery(this).val();jQuery(this).parent().parent(".ast-border-wrapper").find('.connected[ data-element-connect="'+e+'" ]').each(function(e,t){jQuery(this).val(a).change()})})},generateFieldHtml:function(e,t){var d="",u=[];_.each(e,function(e,t){new_value=wp.customize.control("astra-settings["+e.name+"]")?wp.customize.control("astra-settings["+e.name+"]").params.value:"";var a=e.control,n="customize-control-"+a+"-content",o=wp.template(n),i=new_value||e.default;e.value=i;var r="",s="";if(e.label=e.title,_.each(e.data_attrs,function(e,t){r+=" data-"+t+" ='"+e+"'"}),_.each(e.input_attrs,function(e,t){s+=t+" ='"+e+"'"}),e.dataAttrs=r,e.inputAttrs=s,u.push({key:a,value:i,name:e.name}),"ast-responsive"==a){var c=void 0===e.responsive||e.responsive;e.responsive=c}var l=e.name.replace("[","-");l=l.replace("]",""),d+="<li id='customize-control-"+l+"' class='customize-control customize-control-"+e.control+"' >",d+=o(e),d+="</li>"});var a=new Object;return a.controls=u,a.html=d,a},generateDropdownHtml:function(e,t){var a=t.data("inherit"),n="",o=0,i=(e=u.merge(["inherit"],e),t.val()||"400");for(astraTypo.inherit=a;o<e.length;o++)0===o&&-1===u.inArray(i,e)?(i=e[0],selected=' selected="selected"'):selected=e[o]==i?' selected="selected"':"",e[o].includes("italic")||(n+='<option value="'+e[o]+'"'+selected+">"+astraTypo[e[o]]+"</option>");t.html(n)},initResponsiveTrigger:function(e,t){e.find(".ast-responsive-btns button").on("click",function(e){var t=jQuery(this).attr("data-device");t="desktop"==t?"tablet":"tablet"==t?"mobile":"desktop",jQuery('.wp-full-overlay-footer .devices button[data-device="'+t+'"]').trigger("click")})},initColor:function(e,t,n){var o=this;e.find(".customize-control-ast-color .ast-color-picker-alpha").wpColorPicker({change:function(e,t){if(void 0!==e.originalEvent||void 0!==t.color._alpha){var a=jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];jQuery(a).val(t.color.toString()),n=(n=jQuery(a).parents(".customize-control").attr("id")).replace("customize-control-",""),o.container.trigger("ast_settings_changed",[o,jQuery(a),t.color.toString(),n])}},clear:function(e){var t=jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];jQuery(t).val(""),n=(n=jQuery(t).parents(".customize-control").attr("id")).replace("customize-control-",""),o.container.trigger("ast_settings_changed",[o,jQuery(t),"",n]),wp.customize.previewer.refresh()}})},initResponsiveColor:function(e,t,s){var c=this;e.find(".ast-responsive-color").wpColorPicker({change:function(e,t){if((void 0!==e.originalEvent||void 0!==t.color._alpha)&&jQuery("html").hasClass("responsive-background-color-ready")){var a=jQuery(this).data("name"),n={desktop:jQuery(".desktop.ast-responsive-color[data-name='"+a+"']").val(),tablet:jQuery(".tablet.ast-responsive-color[data-name='"+a+"']").val(),mobile:jQuery(".mobile.ast-responsive-color[data-name='"+a+"']").val()},o=e.target,i=jQuery(this).data("id"),r={desktop:n.desktop,tablet:n.tablet,mobile:n.mobile};"desktop"===i&&(r.desktop=t.color.toString()),"tablet"===i&&(r.tablet=t.color.toString()),"mobile"===i&&(r.mobile=t.color.toString()),jQuery(o).val(t.color.toString()),s=(s=jQuery(o).parents(".customize-control").attr("id")).replace("customize-control-",""),c.container.trigger("ast_settings_changed",[c,jQuery(this),r,s])}},clear:function(e){var t=jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0],a=jQuery(this).closest(".wp-picker-input-wrap").find(".wp-color-picker").data("id"),n=jQuery(t).attr("data-name"),o={desktop:jQuery(".desktop.ast-responsive-color[data-name='"+n+"']").val(),tablet:jQuery(".tablet.ast-responsive-color[data-name='"+n+"']").val(),mobile:jQuery(".mobile.ast-responsive-color[data-name='"+n+"']").val()},i={desktop:o.desktop,tablet:o.tablet,mobile:o.mobile};wp.customize.previewer.refresh(),t&&("desktop"===a&&(i.desktop=""),"tablet"===a&&(i.tablet=""),"mobile"===a&&(i.mobile=""),jQuery(t).val(""),c.container.trigger("ast_settings_changed",[c,jQuery(t),i,s])),s=(s=jQuery(t).parents(".customize-control").attr("id")).replace("customize-control-","")}}),e.find(".ast-responsive-btns button").on("click",function(e){var t=jQuery(this).attr("data-device");t="desktop"==t?"tablet":"tablet"==t?"mobile":"desktop",jQuery('.wp-full-overlay-footer .devices button[data-device="'+t+'"]').trigger("click")}),e.find(".ast-responsive-color.desktop").parents(".wp-picker-container").addClass("active")},onOptionChange:function(e,t,a,n,o){u(".hidden-field-astra-settings-"+o).val(n),sub_control=wp.customize.control("astra-settings["+o+"]"),sub_control.setting.set(n)},updateResonsiveValue:function(e,t){"use strict";var a=this,n={};a.responsiveContainer=e.closest(".ast-responsive-wrapper"),a.responsiveContainer.find("input.ast-responsive-input").each(function(){var e=jQuery(this),t=e.data("id"),a=e.val();n[t]=a}),a.responsiveContainer.find("select.ast-responsive-select").each(function(){var e=jQuery(this),t=e.data("id"),a=e.val();n[t]=a}),a.container.trigger("ast_settings_changed",[a,e,n,t])},isJsonString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},initAstResonsiveBgControl:function(c,e,l){var t=e.value,a=c.container.find(".ast-responsive-bg-color-control"),n=e.name,d=c.container.find("#customize-control-"+n);!_.isUndefined(t.desktop["background-image"])&&""!==t.desktop["background-image"]||(d.find(".background-wrapper > .background-container.desktop > .background-repeat").hide(),d.find(".background-wrapper > .background-container.desktop > .background-position").hide(),d.find(".background-wrapper > .background-container.desktop > .background-size").hide(),d.find(".background-wrapper > .background-container.desktop > .background-attachment").hide()),!_.isUndefined(t.tablet["background-image"])&&""!==t.tablet["background-image"]||(d.find(".background-wrapper > .background-container.tablet > .background-repeat").hide(),d.find(".background-wrapper > .background-container.tablet > .background-position").hide(),d.find(".background-wrapper > .background-container.tablet > .background-size").hide(),d.find(".background-wrapper > .background-container.tablet > .background-attachment").hide()),!_.isUndefined(t.mobile["background-image"])&&""!==t.mobile["background-image"]||(d.find(".background-wrapper > .background-container.mobile > .background-repeat").hide(),d.find(".background-wrapper > .background-container.mobile > .background-position").hide(),d.find(".background-wrapper > .background-container.mobile > .background-size").hide(),d.find(".background-wrapper > .background-container.mobile > .background-attachment").hide()),a.wpColorPicker({change:function(e,t){if(void 0!==e.originalEvent||void 0!==t.color._alpha){var a=jQuery(this).data("id");c.saveValue(a,"background-color",t.color.toString(),jQuery(this),l)}},clear:function(e){var t=jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0],a=jQuery(this).closest(".wp-picker-input-wrap").find(".wp-color-picker").data("id");t&&c.saveValue(a,"background-color","",jQuery(t),l),wp.customize.previewer.refresh()}}),d.on("change",".background-repeat select",function(){var e=jQuery(this),t=e.data("id"),a=e.val();c.saveValue(t,"background-repeat",a,jQuery(this),l)}),d.on("change click",".background-size input",function(){var e=jQuery(this),t=e.data("id"),a=e.val();jQuery(this).parent(".buttonset").find(".switch-input").removeAttr("checked"),jQuery(this).attr("checked","checked"),c.saveValue(t,"background-size",a,e,l)}),d.on("change",".background-position select",function(){var e=jQuery(this),t=e.data("id"),a=e.val();c.saveValue(t,"background-position",a,e,l)}),d.on("change click",".background-attachment input",function(){var e=jQuery(this),t=e.data("id"),a=e.val();jQuery(this).parent(".buttonset").find(".switch-input").removeAttr("checked"),jQuery(this).attr("checked","checked"),c.saveValue(t,"background-attachment",a,e,l)}),d.on("click",".background-image-upload-button, .thumbnail-image img",function(e){var i=jQuery(this),r=i.data("id");l=i.data("name");var s=wp.media({multiple:!1}).open().on("select",function(){var e,t,a,n=s.state().get("selection").first(),o=n.toJSON().sizes.full.url;_.isUndefined(n.toJSON().sizes.medium)?_.isUndefined(n.toJSON().sizes.thumbnail)||(o=n.toJSON().sizes.thumbnail.url):o=n.toJSON().sizes.medium.url,e=n.toJSON().sizes.full.url,n.toJSON().id,n.toJSON().width,n.toJSON().height,""!==e&&d.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),c.saveValue(r,"background-image",e,i,l),t=d.find(".background-container."+r+" .placeholder, .background-container."+r+" .thumbnail"),a=d.find(".background-container."+r+" .background-image-upload-remove-button"),t.length&&t.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+o+'" alt="" data-id="'+r+'" data-name="'+l+'"/>'),a.length&&a.show()});e.preventDefault()}),d.on("click",".background-image-upload-remove-button",function(e){var t,a,n=jQuery(this).data("id");c.saveValue(n,"background-image","",jQuery(this),l),t=d.find(".background-container."+n+" .placeholder, .background-container."+n+" .thumbnail"),a=d.find(".background-container."+n+" .background-image-upload-remove-button"),d.find(".background-wrapper > .background-container."+n+" > .background-repeat").hide(),d.find(".background-wrapper > .background-container."+n+" > .background-position").hide(),d.find(".background-wrapper > .background-container."+n+" > .background-size").hide(),d.find(".background-wrapper > .background-container."+n+" > .background-attachment").hide(),d.find(".background-container."+n+" .more-settings").attr("data-direction","down"),d.find(".background-container."+n+" .more-settings").find(".message").html(astraCustomizerControlBackground.moreSettings),d.find(".background-container."+n+" .more-settings").find(".icon").html("↓"),t.length&&t.removeClass().addClass("placeholder").html(astraCustomizerControlBackground.placeholder),a.length&&a.hide(),wp.customize.previewer.refresh(),e.preventDefault()}),d.on("click",".more-settings",function(e){var t=jQuery(this).data("id");d.find(".background-wrapper > .background-container."+t+" > .background-repeat").toggle(),d.find(".background-wrapper > .background-container."+t+" > .background-position").toggle(),d.find(".background-wrapper > .background-container."+t+" > .background-size").toggle(),d.find(".background-wrapper > .background-container."+t+" > .background-attachment").toggle(),"down"===u(this).attr("data-direction")?(u(this).attr("data-direction","up"),u(this).find(".message").html(astraCustomizerControlBackground.lessSettings),u(this).find(".icon").html("↑")):(u(this).attr("data-direction","down"),u(this).find(".message").html(astraCustomizerControlBackground.moreSettings),u(this).find(".icon").html("↓"))}),d.find(".ast-responsive-btns button").on("click",function(e){var t=jQuery(this).attr("data-device");t="desktop"==t?"tablet":"tablet"==t?"mobile":"desktop",jQuery('.wp-full-overlay-footer .devices button[data-device="'+t+'"]').trigger("click")}),jQuery(" .wp-full-overlay-footer .devices button ").on("click",function(){var e=jQuery(this).attr("data-device");jQuery(".customize-control-ast-responsive-background .background-container, .customize-control .ast-responsive-btns > li").removeClass("active"),jQuery(".customize-control-ast-responsive-background .background-container."+e+", .customize-control .ast-responsive-btns > li."+e).addClass("active")})},initAstBgControl:function(s,e,c){var t=s.setting._value,a=e.name,n=s.container.find(".ast-color-control"),l=s.container.find("#customize-control-"+a);!_.isUndefined(t["background-image"])&&""!==t["background-image"]||(l.find(".background-wrapper > .background-repeat").hide(),l.find(".background-wrapper > .background-position").hide(),l.find(".background-wrapper > .background-size").hide(),l.find(".background-wrapper > .background-attachment").hide()),n.wpColorPicker({change:function(){if(jQuery("html").hasClass("background-colorpicker-ready")){var e=jQuery(this);setTimeout(function(){s.saveBgValue("background-color",n.val(),e,c)},100)}},clear:function(e){var t=jQuery(e.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];t&&s.saveBgValue("background-color","",jQuery(t),c),wp.customize.previewer.refresh()}}),l.on("change",".background-repeat select",function(){s.saveBgValue("background-repeat",jQuery(this).val(),jQuery(this),c)}),l.on("change click",".background-size input",function(){jQuery(this).parent(".buttonset").find(".switch-input").removeAttr("checked"),jQuery(this).attr("checked","checked"),s.saveBgValue("background-size",jQuery(this).val(),jQuery(this),c)}),l.on("change",".background-position select",function(){s.saveBgValue("background-position",jQuery(this).val(),jQuery(this),c)}),l.on("change click",".background-attachment input",function(){jQuery(this).parent(".buttonset").find(".switch-input").removeAttr("checked"),jQuery(this).attr("checked","checked"),s.saveBgValue("background-attachment",jQuery(this).val(),jQuery(this),c)}),l.on("click",".background-image-upload-button, .thumbnail-image img",function(e){var i=jQuery(this),r=wp.media({multiple:!1}).open().on("select",function(){var e,t,a,n=r.state().get("selection").first(),o=n.toJSON().sizes.full.url;_.isUndefined(n.toJSON().sizes.medium)?_.isUndefined(n.toJSON().sizes.thumbnail)||(o=n.toJSON().sizes.thumbnail.url):o=n.toJSON().sizes.medium.url,e=n.toJSON().sizes.full.url,n.toJSON().id,n.toJSON().width,n.toJSON().height,""!==e&&l.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),s.saveBgValue("background-image",e,i,c),t=l.find(".placeholder, .thumbnail"),a=l.find(".background-image-upload-remove-button"),t.length&&t.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+o+'" alt="" />'),a.length&&a.show()});e.preventDefault()}),l.on("click",".background-image-upload-remove-button",function(e){var t,a;e.preventDefault(),s.saveBgValue("background-image","",jQuery(this)),t=l.find(".placeholder, .thumbnail"),a=l.find(".background-image-upload-remove-button"),l.find(".background-wrapper > .background-repeat").hide(),l.find(".background-wrapper > .background-position").hide(),l.find(".background-wrapper > .background-size").hide(),l.find(".background-wrapper > .background-attachment").hide(),l.find(".more-settings").attr("data-direction","down"),l.find(".more-settings").find(".message").html(astraCustomizerControlBackground.moreSettings),l.find(".more-settings").find(".icon").html("↓"),t.length&&t.removeClass().addClass("placeholder").html(astraCustomizerControlBackground.placeholder),a.length&&a.hide()}),l.on("click",".more-settings",function(e){l.find(".background-wrapper > .background-repeat").toggle(),l.find(".background-wrapper > .background-position").toggle(),l.find(".background-wrapper > .background-size").toggle(),l.find(".background-wrapper > .background-attachment").toggle(),"down"===u(this).attr("data-direction")?(u(this).attr("data-direction","up"),u(this).find(".message").html(astraCustomizerControlBackground.lessSettings),u(this).find(".icon").html("↑")):(u(this).attr("data-direction","down"),u(this).find(".message").html(astraCustomizerControlBackground.moreSettings),u(this).find(".icon").html("↓"))})},saveValue:function(e,t,a,n,o){var i=jQuery("#customize-control-"+this.id.replace("[","-").replace("]","")+" .responsive-background-hidden-value"),r=JSON.parse(i.val());r[e][t]=a,jQuery(i).attr("value",JSON.stringify(r)).trigger("change"),o=(o=jQuery(n).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("ast_settings_changed",[this,n,r,o])},saveBgValue:function(e,t,a,n){var o=jQuery("#customize-control-"+this.id.replace("[","-").replace("]","")+" .background-hidden-value"),i=JSON.parse(o.val());i[e]=t,jQuery(o).attr("value",JSON.stringify(i)).trigger("change"),n=(n=jQuery(a).parents(".customize-control").attr("id")).replace("customize-control-",""),this.container.trigger("ast_settings_changed",[this,a,i,n])},saveBorderValue:function(e,t,a,n){var o={top:"",right:"",bottom:"",left:""};this.container.find("input.ast-border-desktop").each(function(){var e=jQuery(this),t=e.data("id");item_value=e.val(),o[t]=item_value,e.attr("value",item_value)}),this.container.trigger("ast_settings_changed",[this,a,o,n])}})}(jQuery),function(p){var v=wp.customize;AstTypography={init:function(){AstTypography._initFonts()},_initFonts:function(){p(".customize-control-ast-font-family select").each(function(e){if(void 0!==astra.customizer){var t=astra.customizer.settings.google_fonts,a=p(this).data("name");p(this).html(t),p("select[data-name='"+a+"'] option[value='inherit']").text(p(this).data("inherit"));var n=p(this).data("value");p(this).val(n)}}),p(".customize-control-ast-font-family select").each(AstTypography._initFont),p(".customize-control-ast-font-family select, .customize-control-ast-font-variant select").selectWoo(),p(".customize-control-ast-font-variant select").on("select2:unselecting",function(e){var t=p(this).data("customize-setting-link");(e.params.args.data.id||"")&&(p(this).find('option[value="'+e.params.args.data.id+'"]').removeAttr("selected"),null===p(this).val()&&v(t).set(""))})},_initFont:function(){var e=p(this),t=e.data("customize-setting-link"),a=e.data("connected-control"),n=e.data("connected-variant");void 0!==a&&(v(t).bind(AstTypography._fontSelectChange),AstTypography._setFontWeightOptions.apply(v(t),[!0])),void 0!==n&&(v(t).bind(AstTypography._fontSelectChange),AstTypography._setFontVarianttOptions.apply(v(t),[!0]))},_fontSelectChange:function(){var e=v.control(this.id).container.find("select").data("connected-variant");AstTypography._setFontWeightOptions.apply(this,[!1]),void 0!==e&&AstTypography._setFontVarianttOptions.apply(this,[!1])},_cleanGoogleFonts:function(e){if(!e.includes(","))return e;var t=e.split(","),a=new RegExp("'","gi"),n=t[0].replace(a,"");return void 0!==AstFontFamilies.google[n]&&(e=n),e},_getWeightObject:function(e){var t=["400","600"];return"inherit"==e?t=["100","200","300","400","500","600","700","800","900"]:void 0!==AstFontFamilies.system[e]?t=AstFontFamilies.system[e].weights:void 0!==AstFontFamilies.google[e]?(t=AstFontFamilies.google[e][0],t=Object.keys(t).map(function(e){return t[e]})):void 0!==AstFontFamilies.custom[e]&&(t=AstFontFamilies.custom[e].weights),t},_setFontWeightOptions:function(e){var t=0,a=v.control(this.id).container.find("select"),n=this(),o="",i=a.data("connected-control"),r=(a.data("inherit"),v.control(i).container.find("select")),s=r.data("inherit"),c=e?r.val():"400",l=["400","600"],d="",u=astraTypo;"inherit"==n&&(c=e?r.val():"inherit");n=AstTypography._cleanGoogleFonts(n),l=AstTypography._getWeightObject(n);for(l=p.merge(["inherit"],l),u.inherit=s;t<l.length;t++)o=0===t&&-1===p.inArray(c,l)?(c=l[0],' selected="selected"'):l[t]==c?' selected="selected"':"",l[t].includes("italic")||(d+='<option value="'+l[t]+'"'+o+">"+u[l[t]]+"</option>");r.html(d),e||(v(i).set(""),v(i).set(c))},_setFontVarianttOptions:function(e){var t=0,a=v.control(this.id).container.find("select"),n=this(),o="",i=a.data("connected-variant"),r=(a.data("inherit"),v.control(i).container.find("select")),s=v.control(i).container.find(".ast-font-variant-hidden-value"),c="",l="",d=r.data("inherit"),u=astraTypo,p=s.val().split(",");"Google"==(a.find('option[value="'+a.val()+'"]').closest("optgroup").attr("label")||"")?r.parent().removeClass("ast-hide"):r.parent().addClass("ast-hide");n=AstTypography._cleanGoogleFonts(n);var g=AstTypography._getWeightObject(n);u.inherit=d;for(t=0;t<g.length;t++){for(var h=0;h<p.length;h++)o=g[t]===p[h]?(c=g[t],' selected="selected"'):g[t]==c?' selected="selected"':"";l+='<option value="'+g[t]+'"'+o+">"+u[g[t]]+"</option>"}r.html(l),e||v(i).set("")}},p(function(){AstTypography.init()})}(jQuery);