!function(n){jQuery(window).on("load",function(){jQuery("html").addClass("background-colorpicker-ready")}),wp.customize.controlConstructor["ast-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initAstBgControl()},initAstBgControl:function(){var r=this,t=r.setting._value,e=r.container.find(".ast-color-control");r.container.find(".background-wrapper > .background-repeat").hide(),r.container.find(".background-wrapper > .background-position").hide(),r.container.find(".background-wrapper > .background-size").hide(),r.container.find(".background-wrapper > .background-attachment").hide(),!_.isUndefined(t["background-image"])&&""!==t["background-image"]||r.container.find(".more-settings").hide(),e.wpColorPicker({change:function(){jQuery("html").hasClass("background-colorpicker-ready")&&setTimeout(function(){r.saveValue("background-color",e.val())},100)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&r.saveValue("background-color","")}}),r.container.on("change",".background-repeat select",function(){r.saveValue("background-repeat",jQuery(this).val())}),r.container.on("change click",".background-size input",function(){jQuery(this).parent(".buttonset").find(".switch-input").removeAttr("checked"),jQuery(this).attr("checked","checked"),r.saveValue("background-size",jQuery(this).val())}),r.container.on("change",".background-position select",function(){r.saveValue("background-position",jQuery(this).val())}),r.container.on("change click",".background-attachment input",function(){jQuery(this).parent(".buttonset").find(".switch-input").removeAttr("checked"),jQuery(this).attr("checked","checked"),r.saveValue("background-attachment",jQuery(this).val())}),r.container.on("click",".background-image-upload-button, .thumbnail-image img",function(t){var i=wp.media({multiple:!1}).open().on("select",function(){var t,e,n,o=i.state().get("selection").first(),a=o.toJSON().sizes.full.url;_.isUndefined(o.toJSON().sizes.medium)?_.isUndefined(o.toJSON().sizes.thumbnail)||(a=o.toJSON().sizes.thumbnail.url):a=o.toJSON().sizes.medium.url,t=o.toJSON().sizes.full.url,o.toJSON().id,o.toJSON().width,o.toJSON().height,""!==t&&r.container.find(".more-settings").show(),r.saveValue("background-image",t),e=r.container.find(".placeholder, .thumbnail"),n=r.container.find(".background-image-upload-remove-button"),e.length&&e.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+a+'" alt="" />'),n.length&&n.show()});t.preventDefault()}),r.container.on("click",".background-image-upload-remove-button",function(t){var e,n;t.preventDefault(),r.saveValue("background-image",""),e=r.container.find(".placeholder, .thumbnail"),n=r.container.find(".background-image-upload-remove-button"),r.container.find(".background-wrapper > .background-repeat").hide(),r.container.find(".background-wrapper > .background-position").hide(),r.container.find(".background-wrapper > .background-size").hide(),r.container.find(".background-wrapper > .background-attachment").hide(),r.container.find(".more-settings").attr("data-direction","down"),r.container.find(".more-settings").find(".message").html(astraCustomizerControlBackground.moreSettings),r.container.find(".more-settings").find(".icon").html("↓"),e.length&&e.removeClass().addClass("placeholder").html(astraCustomizerControlBackground.placeholder),n.length&&n.hide()}),r.container.on("click",".more-settings",function(t){r.container.find(".background-wrapper > .background-repeat").toggle(),r.container.find(".background-wrapper > .background-position").toggle(),r.container.find(".background-wrapper > .background-size").toggle(),r.container.find(".background-wrapper > .background-attachment").toggle(),"down"===n(this).attr("data-direction")?(n(this).attr("data-direction","up"),n(this).find(".message").html(astraCustomizerControlBackground.lessSettings),n(this).find(".icon").html("↑")):(n(this).attr("data-direction","down"),n(this).find(".message").html(astraCustomizerControlBackground.moreSettings),n(this).find(".icon").html("↓"))})},saveValue:function(t,e){var n=this,o=jQuery("#customize-control-"+n.id.replace("[","-").replace("]","")+" .background-hidden-value"),a=n.setting._value;a[t]=e,jQuery(o).attr("value",JSON.stringify(a)).trigger("change"),n.setting.set(a)}})}(jQuery),jQuery,jQuery(window).on("load",function(){jQuery("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["ast-color"]=wp.customize.Control.extend({ready:function(){"use strict";var o=this;this.container.find(".ast-color-picker-alpha").wpColorPicker({change:function(t,e){t.target;var n=e.color.toString();jQuery("html").hasClass("colorpicker-ready")&&o.setting.set(n)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&o.setting.set("")}})}}),jQuery,wp.customize.controlConstructor["ast-link"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,n=jQuery(".customize-link-control-data").data("value");this.container.on("change keyup",".ast-link-input",function(t){t.preventDefault(),value=jQuery(this).val(),n.url=value,jQuery(".customize-link-control-data").attr("data-value",JSON.stringify(n)).trigger("change"),e.setting.set(n)}),this.container.on("change click",".ast-link-open-in-new-tab",function(){value=jQuery(this).is(":checked"),n.new_tab=value,jQuery(".customize-link-control-data").attr("data-value",JSON.stringify(n)).trigger("change"),e.setting.set(n)}),this.container.on("change keyup",".ast-link-relationship",function(t){t.preventDefault(),value=jQuery(this).val(),n.link_rel=value,jQuery(".customize-link-control-data").attr("data-value",JSON.stringify(n)).trigger("change"),e.setting.set(n)})}}),jQuery,jQuery(window).on("load",function(){jQuery("html").addClass("responsive-background-color-ready")}),wp.customize.controlConstructor["ast-responsive-color"]=wp.customize.Control.extend({ready:function(){"use strict";this.initAstBgControl()},initAstBgControl:function(){var i=this;i.setting._value,i.container.find(".ast-responsive-color").wpColorPicker({change:function(t,e){if(jQuery("html").hasClass("responsive-background-color-ready")){var n=i.setting.get(),o=jQuery(this).data("id"),a={desktop:n.desktop,tablet:n.tablet,mobile:n.mobile};"desktop"===o&&(a.desktop=e.color.toString()),"tablet"===o&&(a.tablet=e.color.toString()),"mobile"===o&&(a.mobile=e.color.toString()),i.setting.set(a)}},clear:function(t){var e=jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0],n=jQuery(this).closest(".wp-picker-input-wrap").find(".wp-color-picker").data("id"),o=i.setting.get(),a={desktop:o.desktop,tablet:o.tablet,mobile:o.mobile};e&&("desktop"===n&&(a.desktop=""),"tablet"===n&&(a.tablet=""),"mobile"===n&&(a.mobile=""),i.setting.set(a))}}),this.container.find(".ast-responsive-btns button").on("click",function(t){var e=jQuery(this).attr("data-device");e="desktop"==e?"tablet":"tablet"==e?"mobile":"desktop",jQuery('.wp-full-overlay-footer .devices button[data-device="'+e+'"]').trigger("click")}),jQuery(".customize-control-ast-responsive-color .customize-control-content .ast-responsive-color.desktop").parents(".wp-picker-container").addClass("active")}}),jQuery(".wp-full-overlay-footer .devices button").on("click",function(){var t=jQuery(this).attr("data-device");jQuery(".customize-control-ast-responsive-color .customize-control-content .wp-picker-container").removeClass("active"),jQuery(".customize-control-ast-responsive-color .customize-control-content .ast-responsive-color."+t).parents(".wp-picker-container").addClass("active")}),jQuery(window).on("load",function(){jQuery("html").addClass("responsive-background-img-ready")}),wp.customize.controlConstructor["ast-responsive-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initAstBgControl(),this.astResponsiveInit()},initAstBgControl:function(){var c=this,t=c.setting._value,e=c.container.find(".ast-responsive-bg-color-control");!_.isUndefined(t.desktop["background-image"])&&""!==t.desktop["background-image"]||(c.container.find(".background-wrapper > .background-container.desktop > .background-repeat").hide(),c.container.find(".background-wrapper > .background-container.desktop > .background-position").hide(),c.container.find(".background-wrapper > .background-container.desktop > .background-size").hide(),c.container.find(".background-wrapper > .background-container.desktop > .background-attachment").hide()),!_.isUndefined(t.tablet["background-image"])&&""!==t.tablet["background-image"]||(c.container.find(".background-wrapper > .background-container.tablet > .background-repeat").hide(),c.container.find(".background-wrapper > .background-container.tablet > .background-position").hide(),c.container.find(".background-wrapper > .background-container.tablet > .background-size").hide(),c.container.find(".background-wrapper > .background-container.tablet > .background-attachment").hide()),!_.isUndefined(t.mobile["background-image"])&&""!==t.mobile["background-image"]||(c.container.find(".background-wrapper > .background-container.mobile > .background-repeat").hide(),c.container.find(".background-wrapper > .background-container.mobile > .background-position").hide(),c.container.find(".background-wrapper > .background-container.mobile > .background-size").hide(),c.container.find(".background-wrapper > .background-container.mobile > .background-attachment").hide()),e.wpColorPicker({change:function(t,e){var n=jQuery(this).data("id");jQuery("html").hasClass("responsive-background-img-ready")&&c.saveValue(n,"background-color",e.color.toString())},clear:function(t){var e=jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0],n=jQuery(this).closest(".wp-picker-input-wrap").find(".wp-color-picker").data("id");e&&c.saveValue(n,"background-color","")}}),c.container.on("change",".background-repeat select",function(){var t=jQuery(this),e=t.data("id"),n=t.val();c.saveValue(e,"background-repeat",n)}),c.container.on("change click",".background-size input",function(){var t=jQuery(this),e=t.data("id"),n=t.val();t.parent(".buttonset").find(".switch-input").removeAttr("checked"),t.attr("checked","checked"),c.saveValue(e,"background-size",n)}),c.container.on("change",".background-position select",function(){var t=jQuery(this),e=t.data("id"),n=t.val();c.saveValue(e,"background-position",n)}),c.container.on("change click",".background-attachment input",function(){var t=jQuery(this),e=t.data("id"),n=t.val();t.parent(".buttonset").find(".switch-input").removeAttr("checked"),t.attr("checked","checked"),c.saveValue(e,"background-attachment",n)}),c.container.on("click",".background-image-upload-button",function(t){var i=jQuery(this).data("id"),r=wp.media({multiple:!1}).open().on("select",function(){var t,e,n,o=r.state().get("selection").first(),a=o.toJSON().sizes.full.url;_.isUndefined(o.toJSON().sizes.medium)?_.isUndefined(o.toJSON().sizes.thumbnail)||(a=o.toJSON().sizes.thumbnail.url):a=o.toJSON().sizes.medium.url,t=o.toJSON().sizes.full.url,o.toJSON().id,o.toJSON().width,o.toJSON().height,""!==t&&c.container.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),c.saveValue(i,"background-image",t),e=c.container.find(".background-container."+i+" .placeholder, .background-container."+i+" .thumbnail"),n=c.container.find(".background-container."+i+" .background-image-upload-remove-button"),e.length&&e.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+a+'" alt="" />'),n.length&&n.show()});t.preventDefault()}),c.container.on("click",".background-image-upload-remove-button",function(t){var e,n,o=jQuery(this).data("id");t.preventDefault(),c.saveValue(o,"background-image",""),e=c.container.find(".background-container."+o+" .placeholder, .background-container."+o+" .thumbnail"),n=c.container.find(".background-container."+o+" .background-image-upload-remove-button"),c.container.find(".background-wrapper > .background-container."+o+" > .background-repeat").hide(),c.container.find(".background-wrapper > .background-container."+o+" > .background-position").hide(),c.container.find(".background-wrapper > .background-container."+o+" > .background-size").hide(),c.container.find(".background-wrapper > .background-container."+o+" > .background-attachment").hide(),c.container.find(".background-container."+o+" .more-settings").attr("data-direction","down"),c.container.find(".background-container."+o+" .more-settings").find(".message").html(astraCustomizerControlBackground.moreSettings),c.container.find(".background-container."+o+" .more-settings").find(".icon").html("↓"),e.length&&e.removeClass().addClass("placeholder").html(astraCustomizerControlBackground.placeholder),n.length&&n.hide()}),c.container.on("click",".more-settings",function(t){var e=jQuery(this).data("id");c.container.find(".background-wrapper > .background-container."+e+" > .background-repeat").toggle(),c.container.find(".background-wrapper > .background-container."+e+" > .background-position").toggle(),c.container.find(".background-wrapper > .background-container."+e+" > .background-size").toggle(),c.container.find(".background-wrapper > .background-container."+e+" > .background-attachment").toggle(),"down"===jQuery(this).attr("data-direction")?(jQuery(this).attr("data-direction","up"),jQuery(this).find(".message").html(astraCustomizerControlBackground.lessSettings),jQuery(this).find(".icon").html("↑")):(jQuery(this).attr("data-direction","down"),jQuery(this).find(".message").html(astraCustomizerControlBackground.moreSettings),jQuery(this).find(".icon").html("↓"))})},astResponsiveInit:function(){"use strict";this.container.find(".ast-responsive-btns button").on("click",function(t){var e=jQuery(this).attr("data-device");e="desktop"==e?"tablet":"tablet"==e?"mobile":"desktop",jQuery('.wp-full-overlay-footer .devices button[data-device="'+e+'"]').trigger("click")})},saveValue:function(t,e,n){var o=jQuery("#customize-control-"+this.id.replace("[","-").replace("]","")+" .responsive-background-hidden-value"),a=this.setting._value;a[t][e]=n,jQuery(o).attr("value",JSON.stringify(a)).trigger("change"),this.setting.set(a)}}),jQuery(" .wp-full-overlay-footer .devices button ").on("click",function(){var t=jQuery(this).attr("data-device");jQuery(".customize-control-ast-responsive-background .background-container, .customize-control .ast-responsive-btns > li").removeClass("active"),jQuery(".customize-control-ast-responsive-background .background-container."+t+", .customize-control .ast-responsive-btns > li."+t).addClass("active")}),jQuery,wp.customize.controlConstructor["ast-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;t.sortableContainer=t.container.find("ul.sortable").first(),t.sortableContainer.sortable({stop:function(){t.updateValue()}}).disableSelection().find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){t.updateValue()})},updateValue:function(){"use strict";var t=[];this.sortableContainer.find("li").each(function(){jQuery(this).is(".invisible")||t.push(jQuery(this).data("value"))}),this.setting.set(t)}}),function(g){var k=wp.customize;AstTypography={init:function(){AstTypography._initFonts()},_initFonts:function(){g(".customize-control-ast-font-family select").each(function(t){if(void 0!==astra.customizer){var e=astra.customizer.settings.google_fonts,n=g(this).data("name");g(this).html(e),g("select[data-name='"+n+"'] option[value='inherit']").text(g(this).data("inherit"));var o=g(this).data("value");g(this).val(o)}}),g(".customize-control-ast-font-family select").each(AstTypography._initFont),g(".customize-control-ast-font-family select, .customize-control-ast-font-variant select").selectWoo(),g(".customize-control-ast-font-variant select").on("select2:unselecting",function(t){var e=g(this).data("customize-setting-link");(t.params.args.data.id||"")&&(g(this).find('option[value="'+t.params.args.data.id+'"]').removeAttr("selected"),null===g(this).val()&&k(e).set(""))})},_initFont:function(){var t=g(this),e=t.data("customize-setting-link"),n=t.data("connected-control"),o=t.data("connected-variant");void 0!==n&&(k(e).bind(AstTypography._fontSelectChange),AstTypography._setFontWeightOptions.apply(k(e),[!0])),void 0!==o&&(k(e).bind(AstTypography._fontSelectChange),AstTypography._setFontVarianttOptions.apply(k(e),[!0]))},_fontSelectChange:function(){var t=k.control(this.id).container.find("select").data("connected-variant");AstTypography._setFontWeightOptions.apply(this,[!1]),void 0!==t&&AstTypography._setFontVarianttOptions.apply(this,[!1])},_cleanGoogleFonts:function(t){if(!t.includes(","))return t;var e=t.split(","),n=new RegExp("'","gi"),o=e[0].replace(n,"");return void 0!==AstFontFamilies.google[o]&&(t=o),t},_getWeightObject:function(t){var e=["400","600"];return"inherit"==t?e=["100","200","300","400","500","600","700","800","900"]:void 0!==AstFontFamilies.system[t]?e=AstFontFamilies.system[t].weights:void 0!==AstFontFamilies.google[t]?(e=AstFontFamilies.google[t][0],e=Object.keys(e).map(function(t){return e[t]})):void 0!==AstFontFamilies.custom[t]&&(e=AstFontFamilies.custom[t].weights),e},_setFontWeightOptions:function(t){var e=0,n=k.control(this.id).container.find("select"),o=this(),a="",i=n.data("connected-control"),r=(n.data("inherit"),k.control(i).container.find("select")),c=r.data("inherit"),s=t?r.val():"400",d=["400","600"],u="",l=astraTypo;"inherit"==o&&(s=t?r.val():"inherit");o=AstTypography._cleanGoogleFonts(o),d=AstTypography._getWeightObject(o);for(d=g.merge(["inherit"],d),l.inherit=c;e<d.length;e++)a=0===e&&-1===g.inArray(s,d)?(s=d[0],' selected="selected"'):d[e]==s?' selected="selected"':"",d[e].includes("italic")||(u+='<option value="'+d[e]+'"'+a+">"+l[d[e]]+"</option>");r.html(u),t||(k(i).set(""),k(i).set(s))},_setFontVarianttOptions:function(t){var e=0,n=k.control(this.id).container.find("select"),o=this(),a="",i=n.data("connected-variant"),r=(n.data("inherit"),k.control(i).container.find("select")),c=k.control(i).container.find(".ast-font-variant-hidden-value"),s="",d="",u=r.data("inherit"),l=astraTypo,g=c.val().split(",");"Google"==(n.find('option[value="'+n.val()+'"]').closest("optgroup").attr("label")||"")?r.parent().removeClass("ast-hide"):r.parent().addClass("ast-hide");o=AstTypography._cleanGoogleFonts(o);var p=AstTypography._getWeightObject(o);l.inherit=u;for(e=0;e<p.length;e++){for(var h=0;h<g.length;h++)a=p[e]===g[h]?(s=p[e],' selected="selected"'):p[e]==s?' selected="selected"':"";d+='<option value="'+p[e]+'"'+a+">"+l[p[e]]+"</option>"}r.html(d),t||k(i).set("")}},g(function(){AstTypography.init()})}(jQuery);