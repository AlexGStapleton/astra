/**
 * edd.scss
 * Governs the general look and feel of Easy Digital Downloads sections of stores using themes that do not
 * integrate with Easy Digital Downloads specifically.
 */

/**
 * Astra Theme compatibility with Easy Digital Downloads
 */
@import "../mixins/mixins-master";
@import "../../grid/variables";
@import "../variables-site/structure";
@import "../variables-site/colors";


/* Edd Archive Products grid layout */
.columns-1 .ast-edd-archive-article {
  width: 100%;
  margin-right: 0;
}

.columns-2 .ast-edd-archive-article {
  width: 48.4%;
  width: calc(50% - 10px);
  &:nth-child(2n) {
    margin-right: 0;
    clear: right;
  }
  &:nth-child(2n+1) {
    clear: left;
  }
}

.columns-3 .ast-edd-archive-article {
  width: 31.2%;
  width: calc( 33.33% - 14px);
  &:nth-child(3n) {
    margin-right: 0;
    clear: right;
  }
  &:nth-child(3n+1) {
    clear: left;
  }
}

.columns-4 .ast-edd-archive-article {
  width: 22.5%;
  width: calc( 25% - 15px);
  &:nth-child(4n) {
    margin-right: 0;
    clear: right;
  }
  &:nth-child(4n+1) {
    clear: left;
  }
}

.columns-5 .ast-edd-archive-article {
  width: 17.5%;
  width: calc( 20% - 16px);
  &:nth-child(5n) {
    margin-right: 0;
    clear: right;
  }
  &:nth-child(5n+1) {
    clear: left;
  }
}

.columns-6 .ast-edd-archive-article {
  width: 14%;
  width: calc( 16.66% - 16.66px);
  &:nth-child(6n) {
    margin-right: 0;
    clear: right;
  }
  &:nth-child(6n+1) {
    clear: left;
  }
}

@media( max-width: $mx-col-md ) and ( min-width: $col-sm ) {

		// Set default 3 columns for tab.
		[class*='columns-'] {
			.ast-edd-archive-article:nth-child(n) {
				margin-right: 20px;
				clear: none;
			}
		}
		.tablet-columns-1 {
			.ast-edd-archive-article{
				width: 100%;
			} 
		}
		.tablet-columns-2 {
			.ast-edd-archive-article{
				width: 47.6%;
				width: calc(50% - 10px);
				&:nth-child(2n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(2n+1) {
					clear: left;
				}
			}
		}
		.tablet-columns-3 {
			.ast-edd-archive-article{
				width: 30.2%;
				width: calc(33.33% - 14px);
				&:nth-child(3n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(3n+1) {
					clear: left;
				}
			}
		}
		.tablet-columns-4 {
			.ast-edd-archive-article{
				width: 21.5%;
				width: calc(25% - 15px);
				&:nth-child(4n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(4n+1) {
					clear: left;
				}
			}
		}
		.tablet-columns-5 {
			.ast-edd-archive-article{
				width: 16.2%;
				width: calc(20% - 16px);
				&:nth-child(5n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(5n+1) {
					clear: left;
				}
			}
		}
		.tablet-columns-6 {
			.ast-edd-archive-article{
				width: 12.7%;
				width: calc(16.66% - 16.66px);
				&:nth-child(6n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(6n+1) {
					clear: left;
				}
			}
		}
}

@media( max-width: $mx-col-sm ) {

		// Set default 2 columns for mobile.
		[class*='columns-'] {
			.ast-edd-archive-article:nth-child(n) {
				margin-right: 20px;
				clear: none;
			}
		}
		.mobile-columns-1 {
			.ast-edd-archive-article{
				width: 100%;
				&:nth-child(n){
					margin-right: 0;
				}
			}
		}
		.mobile-columns-2 {
			.ast-edd-archive-article{
				width: 46.1%;
				width: calc(50% - 10px);
				&:nth-child(2n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(2n+1) {
					clear: left;
				}
			}
		}
		.mobile-columns-3 {
			.ast-edd-archive-article{
				width: 28.2%;
				width: calc(33.33% - 14px);
				&:nth-child(3n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(3n+1) {
					clear: left;
				}
			}
		}
		.mobile-columns-4 {
			.ast-edd-archive-article{
				width: 19%;
				width: calc(25% - 15px);
				&:nth-child(4n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(4n+1) {
					clear: left;
				}
			}
		}
		.mobile-columns-5 {
			.ast-edd-archive-article{
				width: 13%;
				width: calc(20% - 16px);
				&:nth-child(5n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(5n+1) {
					clear: left;
				}
			}
		}
		.mobile-columns-6 {
			.ast-edd-archive-article{
				width: 10.2%;
				width: calc(16.66% - 16.66px);
				&:nth-child(6n) {
					margin-right: 0;
					clear: right;
				}
				&:nth-child(6n+1) {
					clear: left;
				}
			}
		}
}





/* Edd Archive products strucutre */
.ast-edd-archive-block-wrap{
	.edd_download_image{
		img{
			margin-bottom: .8em;
		}
	}
	.edd_download_title{
		margin-bottom: .5em;
		padding: 0;
		font-size: 1em;
	}
	.edd_price{
		line-height: 1.3;
		margin-bottom: 0;
		font-weight: 700;
		margin-bottom: .5em;
		font-size: .9em;
	}
	.edd-add-to-cart,
	.edd_go_to_checkout {
		margin-top: .5em;
		margin-bottom: .5em;
		white-space: normal;
		line-height: 1.3;
		display: inline-block;
	}
	.edd-cart-added-alert{
		position: static;
		display: inline-block;
	}
	.edd_download_excerpt{
		p{
			margin-bottom: .5em;	
		}
	}
}
.ast-edd-download-categories{
	font-size: .85em;
	margin-bottom: .5em;
	display: block;
	line-height: 1.3;
	opacity: .6;
}

/* =Ajax Add To Cart Button
-------------------------------------------------------------- */

.edd_purchase_submit_wrapper {
  position: relative;
  a.edd-add-to-cart {
    text-decoration: none;
    display: none;
    position: relative;
    overflow: hidden;
    &.edd-has-js {
      display: inline-block;
    }
  }
  .edd-cart-ajax {
    display: none;
    position: relative;
    left: -35px;
  }
}

.edd-submit.button.edd-ajax-loading {
  padding-right: 30px;
}

.edd-add-to-cart .edd-add-to-cart-label {
  opacity: 1;
  filter: alpha(opacity = 100);
}

.edd-loading {
  border-radius: 50%;
  display: block;
  width: 1.5em;
  height: 1.5em;
  &:after {
    border-radius: 50%;
    display: block;
    width: 1.5em;
    height: 1.5em;
  }
  animation: edd-spinning 1.1s infinite linear;
  border-top: 0.2em solid rgba(255, 255, 255, 0.2);
  border-right: 0.2em solid rgba(255, 255, 255, 0.2);
  border-bottom: 0.2em solid rgba(255, 255, 255, 0.2);
  border-left: 0.2em solid #fff;
  font-size: 0.75em;
  position: absolute;
  left: calc(50% - 0.75em);
  top: calc(50% - 0.75em);
  opacity: 0;
  filter: alpha(opacity = 0);
  transform: translateZ(0);
}

a.edd-add-to-cart.white .edd-loading, .edd-discount-loader.edd-loading {
  border-top-color: rgba(0, 0, 0, 0.2);
  border-right-color: rgba(0, 0, 0, 0.2);
  border-bottom-color: rgba(0, 0, 0, 0.2);
  border-left-color: #000;
}

.edd-loading-ajax.edd-loading {
  border-top-color: rgba(0, 0, 0, 0.2);
  border-right-color: rgba(0, 0, 0, 0.2);
  border-bottom-color: rgba(0, 0, 0, 0.2);
  border-left-color: #000;
  display: inline-block;
  position: relative;
  top: 0;
  left: 0.25em;
  vertical-align: middle;
}

#edd_checkout_form_wrap .edd-cart-adjustment .edd-apply-discount.edd-submit {
  display: inline-block;
}

.edd-discount-loader.edd-loading {
  display: inline-block;
  position: relative;
  left: auto;
  vertical-align: middle;
  width: 1.25em;
  height: 1.25em;
}

.edd-loading-ajax.edd-loading {
  opacity: 1;
}

@-webkit-keyframes edd-spinning {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}


@keyframes edd-spinning {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}


a.edd-add-to-cart .edd-add-to-cart-label, .edd-loading {
  transition: .1s opacity !important;
}

.edd-add-to-cart[data-edd-loading] {
  .edd-add-to-cart-label {
    opacity: 0;
    filter: alpha(opacity = 0);
  }
  .edd-loading {
    opacity: 1;
    filter: alpha(opacity = 100);
  }
}

.edd-discount-loader.edd-loading {
  opacity: 1;
  filter: alpha(opacity = 100);
}

.edd-cart-added-alert {
  display: block;
  position: absolute;
}